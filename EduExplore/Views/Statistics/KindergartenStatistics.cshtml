<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>

@using EduExplore.Models.Statistics
@using System.Collections.Generic
@model KindergartenStatisticsViewModel

<p id="inhabitedAreasKindergartens" style="display: none;">@string.Join(",", Model.InhabitedAreasNames.ToList())</p>
<p id="inhabitedAreasKindergartensCount" style="display: none;">@string.Join(",", Model.KindergartensCountInInhabitedAreasList.ToList())</p>
<p id="regionsKindergartens" style="display: none;">@string.Join(",", Model.RegionsNames.ToList())</p>
<p id="regionsKindergartensCount" style="display: none;">@string.Join(",", Model.KindergartensCountInRegionsList.ToList())</p>
<p id="financialTypesKindergartens" style="display: none;">@string.Join(",", Model.FinancialTypesNames.ToList())</p>
<p id="financialTypesKindergartensCount" style="display: none;">@string.Join(",", Model.KindergartensCountOfFinancialTypesList.ToList())</p>

<div class="justify-content-center">
    <div id="firstCarousel" class="carousel slide" data-ride="carousel">
        <div class="carousel-inner">
            <div class="carousel-item active">
                <div class="row justify-content-center">
                    <canvas id="kindergartensInInhabitedAreasFirstChart" style="width:100%;max-width:800px"></canvas>
                </div>
            </div>
            <div class="carousel-item">
                <div class="row justify-content-center">
                    <canvas id="kindergartensInInhabitedAreasSecondChart" style="width:100%;max-width:800px"></canvas>
                </div>
            </div>
            <div class="carousel-item">
                <div class="row justify-content-center">
                    <canvas id="kindergartensInInhabitedAreasThirdChart" style="width:100%;max-width:800px"></canvas>
                </div>
            </div>
        </div>
        <a class="carousel-control-prev" href="#firstCarousel" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#firstCarousel" role="button" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
        </a>
    </div>
    <div id="secondCarousel" class="carousel slide" data-ride="carousel">
        <div class="carousel-inner">
            <div class="carousel-item active">
                <div class="row justify-content-center">
                    <canvas id="kindergartensInRegionsFirstChart" style="width:100%;max-width:800px"></canvas>
                </div>
            </div>
            <div class="carousel-item">
                <div class="row justify-content-center">
                    <canvas id="kindergartensInRegionsSecondChart" style="width:100%;max-width:800px"></canvas>
                </div>
            </div>
            <div class="carousel-item">
                <div class="row justify-content-center">
                    <canvas id="kindergartensInRegionsThirdChart" style="width:100%;max-width:800px"></canvas>
                </div>
            </div>
        </div>
        <a class="carousel-control-prev" href="#secondCarousel" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#secondCarousel" role="button" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
        </a>
    </div>
    <div id="thidCarousel" class="carousel slide" data-ride="carousel">
        <div class="carousel-inner">
            <div class="carousel-item active">
                <div class="row justify-content-center">
                    <canvas id="kindergartensOfFinancialTypeFirstChart" style="width:100%;max-width:800px"></canvas>
                </div>
            </div>
            <div class="carousel-item">
                <div class="row justify-content-center">
                    <canvas id="kindergartensOfFinancialTypeSecondChart" style="width:100%;max-width:800px"></canvas>
                </div>
            </div>
            <div class="carousel-item">
                <div class="row justify-content-center">
                    <canvas id="kindergartensOfFinancialTypeThirdChart" style="width:100%;max-width:800px"></canvas>
                </div>
            </div>
        </div>
        <a class="carousel-control-prev" href="#thidCarousel" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#thidCarousel" role="button" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
        </a>
    </div>
</div>

<script>
    var chartTypeArr = ['pie', 'doughnut', 'bar']
    var chartsId = ['kindergartensInInhabitedAreasFirstChart', 'kindergartensInInhabitedAreasSecondChart', 'kindergartensInInhabitedAreasThirdChart']
    var secondChartsId = ['kindergartensInRegionsFirstChart', 'kindergartensInRegionsSecondChart', 'kindergartensInRegionsThirdChart']
    var thirdChartsId = ['kindergartensOfFinancialTypeFirstChart', 'kindergartensOfFinancialTypeSecondChart', 'kindergartensOfFinancialTypeThirdChart']

    var titles = ['Детски градини по населени места', 'Детски градини по региони', 'Детски градини според вида на финансиране']

    var xValues = (document.getElementById('inhabitedAreasKindergartens').textContent).split(',');
    var yValues = (document.getElementById('inhabitedAreasKindergartensCount').textContent).split(',');

    var xValuesSecond = (document.getElementById('regionsKindergartens').textContent).split(',');
    var yValuesSecond = (document.getElementById('regionsKindergartensCount').textContent).split(',');

    var xValuesThird = (document.getElementById('financialTypesKindergartens').textContent).split(',');
    var yValuesThird = (document.getElementById('financialTypesKindergartensCount').textContent).split(',');

    var colors = ["#7400B8", "#8013BD", "#8B26C3", "#9739C8", "#A24CCD",
        "#AE60D3", "#B973D8", "#C586DD", "#D099E3", "#DCACE8", "#590D22", "#800F2F", "#A4133C", "#C9184A", "#FF4D6D",
        "#FF758F", "#FF8FA3", "#FFB3C1", "#FFCCD5"];


    for (let i = 0; i < 2; i++) {
        new Chart(
            document.getElementById(chartsId[i]),
            {
                type: chartTypeArr[i],
                data: {
                    labels: xValues,
                    datasets: [{
                        backgroundColor: colors,
                        data: yValues
                    }]
                },
                options: {
                    responsive: true,
                    title: {
                        display: true,
                        text: titles[0],
                    }
                }
            });
        new Chart(
            document.getElementById(secondChartsId[i]),
            {
                type: chartTypeArr[i],
                data: {
                    labels: xValuesSecond,
                    datasets: [{
                        backgroundColor: colors,
                        data: yValuesSecond
                    }]
                },
                options: {
                    responsive: true,
                    title: {
                        display: true,
                        text: titles[1],
                    }
                }
            });
        new Chart(
            document.getElementById(thirdChartsId[i]),
            {
                type: chartTypeArr[i],
                data: {
                    labels: xValuesThird,
                    datasets: [{
                        backgroundColor: colors,
                        data: yValuesThird
                    }]
                },
                options: {
                    responsive: true,
                    title: {
                        display: true,
                        text: titles[2],
                    }
                }
            });
    }

    new Chart(
        document.getElementById(chartsId[2]),
        {
            type: chartTypeArr[2],
            data: {
                labels: xValues,
                datasets: [{
                    backgroundColor: colors,
                    data: yValues
                }]
            },
            options: {
                responsive: true,
                scales: {
                    yAxes: [{
                        display: true,
                        ticks: {
                            beginAtZero: true,

                        }
                    }]
                },
                legend: { display: false },
                title: {
                    display: true,
                    text: titles[0]
                }
            }
        });

    new Chart(
        document.getElementById(secondChartsId[2]),
        {
            type: chartTypeArr[2],
            data: {
                labels: xValues,
                datasets: [{
                    backgroundColor: colors,
                    data: yValuesSecond
                }]
            },
            options: {
                responsive: true,
                scales: {
                    yAxes: [{
                        display: true,
                        ticks: {
                            beginAtZero: true,

                        }
                    }]
                },
                legend: { display: false },
                title: {
                    display: true,
                    text: titles[1]
                }
            }
        });
    new Chart(
        document.getElementById(thirdChartsId[2]),
        {
            type: chartTypeArr[2],
            data: {
                labels: xValuesThird,
                datasets: [{
                    backgroundColor: colors,
                    data: yValuesThird
                }]
            },
            options: {
                responsive: true,
                scales: {
                    yAxes: [{
                        display: true,
                        ticks: {
                            beginAtZero: true,

                        }
                    }]
                },
                legend: { display: false },
                title: {
                    display: true,
                    text: titles[2]
                }
            }
        });
</script>
